- 问题的背景
- 解决问题前的现象
- 怎么样解决的
- 解决过程中遇到的难点
- 需要注意的点
- 解决后的现象


## 任务监控系统
- 背景：核心接入系统中有每天每个资金方有很多定时任务需要处理（对账，合同替换）
监控系统的告警，目前有什么问题。
- 存在潜在风险，众多的定时任务执行时，没有统一的监控平台去感知这些任务正常执行，异常退出还是未执行
- 配置表（渠道ID + 任务名称唯一键），执行表，流水表。配置表配置每个需要监控的任务（渠道id + 任务名，生效状态，任务的执行时间间隔类型，执行的时间天，小时，分钟预计执行的最长时间，告警ID 告警频率，配置人，时间戳
- 执行表：任务配置ID，任务执行key, 任务执行状态（未执行，执行中，执行完毕），实际开始结束时间和预计开始结束时间，告警次数
- 流水表：任务配置ID，任务执行ID，告警类型，告警时间，时间戳。
1. 不能影响正常的任务执行，不允许抛出任何异常。
2. 要和被监控的服务解耦，不然被监控服务挂掉后监控也无效了
3. 告警机制，告警频率，最大告警次数，预留缓冲时间

