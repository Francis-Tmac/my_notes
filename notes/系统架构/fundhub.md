### question
1. 为什么 fund_hub 中任务为IO 密集型任务


对账系统：
以前各个资方各自实现自己的对账功能，零散对账，对账的告警由各自开发同学进行关注每天任务繁忙

出现问题：
1. 对账记录没有持久化存储
2. 对账信息不能通过一个集中式的平台查看不利于运营管理。
3. 周末节假日容易错过告警消息，导致数据与资方不一致。

解决方案：
1. 通过对账系统统一对各个资方的数据进行对账处理。
2. 放款对账规则表，放款数据表存储资方的放款数据，放款明细对账结果表，放款汇总对账结果表。
3. 用mq 削峰落地资方放款数据，低频瞬时切时效性不高的场景。

核心接入系统：
### 接入层
落地授信放款还款数据
上游发给我们的用户授信申请，放款申请还款申请并且已经匹配好这笔申请属于哪个资方。

### 配置规则引擎
- 渠道：一个资方，包含渠道id，

- 行为：对在接入层落地到表的一条数据处理，一个行为是包含多个步骤，这个步骤可以暂时理解为系统执行的最小单元，这些步骤组成了一个有向图，在这个有向图中有初始态中间态终态。

- 步骤：系统执行的最小单元，与资方或者上游的一次交互，主动调用，回调类型。步骤包含：与资方的加解密处理器，发送和接收的报文模板以及解析资方报文后的应该去到的下一个步骤（就是节点在有向图中指向的下一个节点）都存储在step中。

- 步骤细节：调用的时候会解析这个模板，通过执行报文配置的处理器得到最终的发送报文，再通过加解密处理器发送给资方，得到资方的返回报文对报文解析后，判断下一步到哪里去。

- 处理器：从效果上来说就是一次方法的执行，主要存在与发送报文模板中，大多数字段的获取都是通过处理器完成，处理器之间可以相互调用。把代码中的方法，包括类的路径，方法名称，入参，返回参数，自定义的中文方法名称存储在数据库，利用Java 反射机制，在运行时通过类的全路径，方法名称，入参执行调用的方法。


使用调度系统对行为进行调度，会判断在哪一个步骤，进行处理