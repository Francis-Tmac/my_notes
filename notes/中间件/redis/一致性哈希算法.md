## 分布式存储
分布式缓存需要多台机器存储数据
### 分片思想
通过哈希算法对数据值取哈希值，然后对机器个数取模，最终值就是存储的机器编号。
但是如果想要扩容，需要改变取模的值，所有的数据都需要重新计算新的位置，导致原本的数据需要迁移到另一台机器上。
相当于缓存一下子全部失效了，相当于所有的数据都会穿透缓存直接请求到数据库。这要可以引发雪崩效应。
扩容或者缩容的数据量。

#### 基本概念
- 一致性哈希算法对 2^32 取模，得到一个值。 1 - 2^32  会形成一个环
- 设集群节点为N ，将哈希环大小分成N 段，每个主机节点处理哈希值落在该段内的数据。同时可以改变节点的权重，
- 当扩容或者缩容发生时支用迁移一个节点上的数据量不会导致大量的数据迁移
- 时间复杂度 logN 采用二分法查找节点所在的范围。

#### 问题
- 哈希环中的数字分布不均匀，就会导致各节点处理的数据不均衡，聪哥降低系统运行效率；
- 容灾与扩容时哈希环上的相邻节点容易受过大影响，一个节点崩溃容易引发雪崩效应。

虚拟环